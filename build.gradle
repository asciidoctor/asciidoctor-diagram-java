buildscript {
    repositories {
        mavenCentral()
        jcenter()
    }

    dependencies {
        classpath 'net.researchgate:gradle-release:2.6.0'
    }
}

apply plugin: 'net.researchgate.release'

subprojects {
    apply plugin: 'java'

    repositories {
        mavenCentral()
    }

    group = 'org.asciidoctor'

    dependencies {
        implementation fileTree('lib')
        testImplementation 'junit:junit:4.11'
    }

    compileJava {
        sourceCompatibility = '11'
        targetCompatibility = '11'
    }

    task zip(type: Zip) {
        from jar
        from configurations.runtimeClasspath.allArtifacts.files
        from configurations.runtimeClasspath
    }

    task testJar(type: Jar, dependsOn: testClasses, group: 'Build') {
        classifier = 'tests'
        from sourceSets.test.output
    }

    configurations {
        tests
    }

    artifacts {
        tests testJar
    }
}

task 'build'